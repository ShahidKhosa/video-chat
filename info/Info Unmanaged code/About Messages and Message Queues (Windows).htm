<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0077)http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#system_defined -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>
	
  About Messages and Message Queues (Windows)

</title><link href="./About Messages and Message Queues (Windows)_files/d139d5bea064890c3efb4d72fedff27b.css" rel="stylesheet" type="text/css"><link rel="alternate" media="print" href="http://msdn.microsoft.com/en-us/library/ms644927(d=printer,v=VS.85).aspx"><meta name="DCS.dcsuri" content="/en-us/library/ms644927(d=lightweight,l=en-us,v=VS.85).aspx"><meta name="NormalizedUrl" content="http://msdn.microsoft.com/en-us/library/ms644927(d=lightweight,l=en-us,v=VS.85).aspx"><meta name="VotingContextUrl" content="http://msdn.microsoft.com/en-us/library/ms644927(l=en-us,v=VS.85).aspx"><meta name="MN" content="74838606-6:39:14 AM"><meta name="Search.ShortId" content="ms644927"><meta name="Ms.Locale" content="en-us"><script id="SEARCH_PREDICT_ID" type="text/javascript" src="./About Messages and Message Queues (Windows)_files/in.aspx"></script><script type="text/javascript" src="./About Messages and Message Queues (Windows)_files/predictadme.js"></script><script type="text/javascript" onload="" onreadystatechange="" src="./About Messages and Message Queues (Windows)_files/saved_resource"></script><script type="text/javascript" onload="" onreadystatechange="" src="./About Messages and Message Queues (Windows)_files/bhocombined.js"></script><style type="text/css" media="screen">div.predictad ul li.selected {background-color:#D5E2FF;border:none;}</style><link class="undefined" style="display: block; " type="text/css" rel="stylesheet" href="./About Messages and Message Queues (Windows)_files/mclassic.css" media="screen"><style type="text/css" media="screen">div.predictad ul li.ad {width:99% !important;}</style></head><body><div id="predictad_div" class="predictad" style="display: none; left: 16px; top: 64px; width: 230px; "></div><div class="header"><table border="0" cellpadding="0" cellspacing="0" class="headerBar cl_lightweight_topnav_slice"><tbody><tr><td class="leftSection cl_lightweight_header_leftSection_wave leftSectionImageClusterOverride"><div class="tabContainer"><a href="http://msdn.microsoft.com/en-us/" title="Home" class=" headerTab">Home</a><a href="http://msdn.microsoft.com/en-us/library" title="Library" class="headerTabSelected cl_lightweight_selected_tab_repeatX ">Library</a><a href="http://msdn.microsoft.com/en-us/bb188199.aspx" title="Learn" class=" headerTab">Learn</a><a href="http://msdn.microsoft.com/en-us/aa570309.aspx" title="Downloads" class=" headerTab">Downloads</a><a href="http://msdn.microsoft.com/en-us/aa570318.aspx" title="Support" class=" headerTab">Support</a><a href="http://msdn.microsoft.com/en-us/aa497440.aspx" title="Community" class=" headerTab">Community</a></div></td><td class="rightSection cl_lightweight_header_rightSection_wave rightSectionImageClusterOverride"><div class="tabContainer"><a href="https://login.live.com/login.srf?wa=wsignin1.0&rpsnv=11&ct=1288618754&rver=6.0.5276.0&wp=MCLBI&wlcxt=msdn%24msdn%24msdn&wreply=http:%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fms644927%2528v%3DVS.85%2529.aspx&lc=1033&cb=&id=254354" title="Sign in">Sign in </a><span class="pipe">|</span><a href="http://msdn.microsoft.com/en-us/library/preferences/locale/?returnurl=%252fen-us%252flibrary%252fms644927(v%253dVS.85).aspx" title="United States - English">United States - English </a><span class="pipe">|</span><a href="http://msdn.microsoft.com/en-us/library/preferences/experience/?returnurl=%252fen-us%252flibrary%252fms644927(v%253dVS.85).aspx" title="Preferences">Preferences</a></div></td></tr></tbody></table></div><div class="contentPlaceHolder"><div class="navigation" id="Navigation" style="width:280px"><div class="searchcontainer"><form id="SearchForm" action="http://social.msdn.microsoft.com/Search/en-us" method="get" style="margin: 0; padding: 0;"><div class="searchBoxContainer" style=""><table class="searchBox" cellpadding="0" cellspacing="0" border="0"><tbody><tr><td class="searchTextBoxTd"><input id="Text1" type="text" maxlength="200" class="searchTextBox" name="query" value="Search MSDN with Bing" onfocus="document.onkeydown = &#39;&#39;; WatermarkFocus(this, &#39;Search MSDN with Bing&#39;, &#39;searchTextBoxTrue&#39;) " onblur="document.onkeydown = Presskey;WatermarkBlur(this, &#39;Search MSDN with Bing&#39;, &#39;searchTextBox&#39;)" autocomplete="off"></td><td class="searchButtonTd"><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#" style="display: block; overflow: hidden; width: 19px; height: 19px; position: relative;           padding: 0; margin: 0;" onclick="javascript:document.getElementById(&#39;SearchForm&#39;).submit();"><img src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" class="cl_search_icon" style="position: relative;" title="Search" alt="Search"></a></td></tr></tbody></table></div></form></div><div class="navcontainer"><div class="nav"><div class="toclevel0 ancestry"><div class="clip5x9 nav_root"><img src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" class="cl_nav_bullet" alt=""></div><div class="nav_div_currentroot"><a href="http://msdn.microsoft.com/en-us/library/ms123401.aspx" title="MSDN Library">MSDN Library</a></div><div class="clip5x9 nav_arrows"><img src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" class="cl_nav_arrow" alt=""></div><div class="nav_div_currentroot"><a href="http://msdn.microsoft.com/en-us/library/ee663300(v=VS.85).aspx" title="Windows Development">Windows Development</a></div><div class="clip5x9 nav_arrows"><img src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" class="cl_nav_arrow" alt=""></div><div class="nav_div_currentroot"><a href="http://msdn.microsoft.com/en-us/library/ff657751(v=VS.85).aspx" title="Windows Application UI Development">Windows Application UI Development</a></div><div class="clip5x9 nav_arrows"><img src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" class="cl_nav_arrow" alt=""></div><div class="nav_div_currentroot"><a href="http://msdn.microsoft.com/en-us/library/ms632586(v=VS.85).aspx" title="Windows and Messages">Windows and Messages</a></div><div class="clip5x9 nav_arrows"><img src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" class="cl_nav_arrow" alt=""></div><div class="nav_div_currentroot"><a href="http://msdn.microsoft.com/en-us/library/ms632590(v=VS.85).aspx" title="Messages and Message Queues">Messages and Message Queues</a></div><div class="clip5x9 nav_arrows"><img src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" class="cl_nav_arrow" alt=""></div><div class="nav_div_currentroot"><a href="http://msdn.microsoft.com/en-us/library/ff468868(v=VS.85).aspx" title="Message and Message Queue Overviews">Message and Message Queue Overviews</a></div></div><div class="clip13x9 nav_dots_current"><img src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" class="cl_nav_dots" alt=""></div><div class="toclevel1 current"><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx" title="About Messages and Message Queues">About Messages and Message Queues</a></div><div class="toclevel2 children" style="border-bottom: 1px solid #bbbbbb;"></div><img src="./About Messages and Message Queues (Windows)_files/030c41d9079671d09a62d8e2c1db6973.gif" alt="Separator" class="communityContentNavigationSeparator cl_lt_cc_line_top"></div></div></div><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#" onclick="onIncreaseToc()" class="tocResize" id="TocResize" style="left:280px"><img id="ResizeImageIncrease" class="cl_nav_resize_open" src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" onmousedown="onIncreaseToc()" title="Expand" alt="Expand"><img id="ResizeImageReset" class="cl_nav_resize_close" src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" style="display:none" onmousedown="onResetToc()" title="Minimize" alt="Minimize"></a><div class="content"><div class="clip117x31 logo"><a href="http://msdn.microsoft.com/en-us/library/default.aspx"><img src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" class="msdn_body_logo" alt="MSDN" title="MSDN"></a></div><img class="TOC_Fade_Top cl_lw_toc_fade_top" src="./About Messages and Message Queues (Windows)_files/030c41d9079671d09a62d8e2c1db6973.gif" alt=""><div class="topicContainer"><div class="topic" xmlns="http://www.w3.org/1999/xhtml"><h1 class="title">About Messages and Message Queues</h1><div id="mainSection"><div class="clsServerSDKContent"></div><p>Unlike MS-DOS-based applications, Windows-based applications are event-driven. They do not make explicit function calls (such as C run-time library calls) to obtain input. Instead, they wait for the system to pass input to them.</p><p>The system passes all input for an application to the various windows in the application. Each window has a function, called a window procedure, that the system calls whenever it has input for the window. The window procedure processes the input and returns control to the system. For more information about window procedures, see <a href="http://msdn.microsoft.com/en-us/library/ms632593(v=VS.85).aspx">Window Procedures</a>.</p><p>If a top-level window stops responding to messages for more than several seconds, the system considers the window to be not responding. In this case, the system hides the window and replaces it with a ghost window that has the same Z order, location, size, and visual attributes. This allows the user to move it, resize it, or even close the application. However, these are the only actions available because the application is actually not responding. When in the debugger mode, the system does not generate a ghost window.</p><p>This section discusses the following topics:</p><p></p><ul><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#windows_messages">Windows Messages</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#types">Message Types</a><ul><li><a href="./About Messages and Message Queues (Windows)_files/About Messages and Message Queues (Windows).htm">System-Defined Messages</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#app_defined">Application-Defined Messages</a></li></ul></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#routing">Message Routing</a><ul><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#quequed_messages">Queued Messages</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#nonqueued_messages">Nonqueued Messages</a></li></ul></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#handling">Message Handling</a><ul><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#loop">Message Loop</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#window_proc">Window Procedure</a></li></ul></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#filtering">Message Filtering</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#posting_sending">Posting and Sending Messages</a><ul><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#posting_messages">Posting Messages</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#sending_messages">Sending Messages</a></li></ul></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#deadlocks">Message Deadlocks</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#broadcasting">Broadcasting Messages</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#query">Query Messages</a></li></ul><h3><a id="windows_messages"></a>Windows Messages</h3><p>The system passes input to a window procedure in the form of 
				a <em>message</em>. Messages are generated by both the system and applications. The system generates a message at each input event — for example, when the user types, moves the mouse, or clicks a control such as a scroll bar. The system also generates messages in response to changes in the system brought about by an application, such as when an application changes the pool of system font resources or resizes one of its windows. An application can generate messages to direct its own windows to perform tasks or to communicate with windows in other applications. </p><p>The system sends a message to a window procedure with a set of four parameters: a window handle, a message identifier, and two values called 
				<em>message parameters</em>. The 
				<em>window handle</em> identifies the window for which the message is intended. The system uses it to determine which window procedure should receive the message. </p><p>A 
				<em>message identifier</em> is a named constant that identifies the purpose of a message. When a window procedure receives a message, it uses a message identifier to determine how to process the message. For example, the message identifier <a href="http://msdn.microsoft.com/en-us/library/dd145213(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_PAINT</strong></a> tells the window procedure that the window's client area has changed and must be repainted. </p><p>Message parameters specify data or the location of data used by a window procedure when processing a message. The meaning and value of the message parameters depend on the message. A message parameter can contain an integer, packed bit flags, a pointer to a structure containing additional data, and so on. When a message does not use message parameters, they are typically set to NULL. A window procedure must check the message identifier to determine how to interpret the message parameters. </p><h3><a id="types"></a>Message Types</h3><p>This section describes the two types of messages: </p><p></p><ul><li><a href="./About Messages and Message Queues (Windows)_files/About Messages and Message Queues (Windows).htm">System-Defined Messages</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#app_defined">Application-Defined Messages</a></li></ul><h4><a id="system_defined"></a>System-Defined Messages</h4><p>The system sends or posts a 
				<em>system-defined message</em> when it communicates with an application. It uses these messages to control the operations of applications and to provide input and other information for applications to process. An application can also send or post system-defined messages. Applications generally use these messages to control the operation of control windows created by using preregistered window classes. </p><p>Each system-defined message has a unique message identifier and a corresponding symbolic constant (defined in the software development kit (SDK) header files) that states the purpose of the message. For example, the  <a href="http://msdn.microsoft.com/en-us/library/dd145213(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_PAINT</strong></a> constant requests that a window paint its contents. </p><p>Symbolic constants specify the category to which system-defined messages belong. The prefix of the constant identifies the type of window that can interpret and process the message. Following are the prefixes and their related message categories. </p><table class="clsStd"><tbody><tr><th>Prefix</th><th>Message category</th><th>Documentation</th></tr><tr><td>ABM and ABN</td><td>Application desktop toolbar </td><td><a href="http://msdn.microsoft.com/en-us/library/bb774198(v=VS.85).aspx">Shell Messages and Notifications</a></td></tr><tr><td>ACM and ACN</td><td>Animation control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff485879(v=VS.85).aspx">Animation Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485880(v=VS.85).aspx">Animation Control Notifications</a></td></tr><tr><td>BCM, BCN, BM, and BN</td><td>Button control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff485886(v=VS.85).aspx">Button Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485887(v=VS.85).aspx">Button Control Notifications</a></td></tr><tr><td>CB and CBN</td><td>ComboBox control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff485901(v=VS.85).aspx">ComboBox Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485902(v=VS.85).aspx">ComboBox Control Notifications</a></td></tr><tr><td>CBEM and CBEN</td><td>ComboBoxEx control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff485893(v=VS.85).aspx">ComboBoxEx Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485894(v=VS.85).aspx">ComboBoxEx Notifications</a></td></tr><tr><td>CCM</td><td>General control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff485932(v=VS.85).aspx">Control Messages</a></td></tr><tr><td>CDM</td><td>Common dialog box </td><td><a href="http://msdn.microsoft.com/en-us/library/ff468810(v=VS.85).aspx">Common Dialog Box Messages</a></td></tr><tr><td>DFM</td><td>Default context menu</td><td><a href="http://msdn.microsoft.com/en-us/library/bb774198(v=VS.85).aspx">Shell Messages and Notifications</a></td></tr><tr><td>DL</td><td>Drag list box </td><td><a href="http://msdn.microsoft.com/en-us/library/ff485914(v=VS.85).aspx">Drag List Box Notifications</a></td></tr><tr><td>DM</td><td>Default push button control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff468826(v=VS.85).aspx">Dialog Box Messages</a></td></tr><tr><td>DTM and DTN</td><td>Date and time picker control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff485908(v=VS.85).aspx">Date and Time Picker Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485909(v=VS.85).aspx">Date and Time Picker Notifications</a></td></tr><tr><td>EM and EN</td><td>Edit control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff485923(v=VS.85).aspx">Edit Control Messages</a>, <a href="http://msdn.microsoft.com/en-us/library/ff485924(v=VS.85).aspx">Edit Control Notifications</a>, <a href="http://msdn.microsoft.com/en-us/library/ff486015(v=VS.85).aspx">Rich Edit Messages</a>, and <a href="http://msdn.microsoft.com/en-us/library/ff486016(v=VS.85).aspx">Rich Edit Notifications</a></td></tr><tr><td>HDM and HDN</td><td>Header control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff485939(v=VS.85).aspx">Header Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485940(v=VS.85).aspx">Header Control Notifications</a></td></tr><tr><td>HKM</td><td>Hot key control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff485942(v=VS.85).aspx">Hot Key Control Messages</a></td></tr><tr><td>IPM and IPN</td><td>IP address control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff485955(v=VS.85).aspx">IP Address Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485956(v=VS.85).aspx">IP Address Notifications</a></td></tr><tr><td>LB and LBN</td><td>List box control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff485967(v=VS.85).aspx">List Box Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485968(v=VS.85).aspx">List Box Notifications</a></td></tr><tr><td>LM</td><td>SysLink control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff486040(v=VS.85).aspx">SysLink Control Messages</a></td></tr><tr><td>LVM and LVN</td><td>List view control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff485961(v=VS.85).aspx">List View Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485962(v=VS.85).aspx">List View Notifications</a></td></tr><tr><td>MCM and MCN</td><td>Month calendar control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff485977(v=VS.85).aspx">Month Calendar Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485978(v=VS.85).aspx">Month Calendar Notifications</a></td></tr><tr><td>PBM</td><td>Progress bar </td><td><a href="http://msdn.microsoft.com/en-us/library/ff485990(v=VS.85).aspx">Progress Bar Messages</a></td></tr><tr><td>PGM and PGN</td><td>Pager control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff485984(v=VS.85).aspx">Pager Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485985(v=VS.85).aspx">Pager Control Notifications</a></td></tr><tr><td>PSM and PSN</td><td>Property sheet </td><td><a href="http://msdn.microsoft.com/en-us/library/ff485996(v=VS.85).aspx">Property Sheet Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff485997(v=VS.85).aspx">Property Sheet Notifications</a></td></tr><tr><td>RB and RBN</td><td>Rebar control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff486005(v=VS.85).aspx">Rebar Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff486006(v=VS.85).aspx">Rebar Control Notifications</a></td></tr><tr><td>SB and SBN</td><td>Status bar window </td><td><a href="http://msdn.microsoft.com/en-us/library/ff486035(v=VS.85).aspx">Status Bar Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff486036(v=VS.85).aspx">Status Bar Notifications</a></td></tr><tr><td>SBM</td><td>Scroll bar control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff486023(v=VS.85).aspx">Scroll Bar Messages</a></td></tr><tr><td>SMC</td><td>Shell menu</td><td><a href="http://msdn.microsoft.com/en-us/library/bb774198(v=VS.85).aspx">Shell Messages and Notifications</a></td></tr><tr><td>STM and STN</td><td>Static control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff486029(v=VS.85).aspx">Static Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff486030(v=VS.85).aspx">Static Control Notifications</a></td></tr><tr><td>TB and TBN</td><td>Toolbar </td><td><a href="http://msdn.microsoft.com/en-us/library/ff486063(v=VS.85).aspx">Toolbar Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff486064(v=VS.85).aspx">Toolbar Control Notifications</a></td></tr><tr><td>TBM and TRBN</td><td>Trackbar control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff486075(v=VS.85).aspx">Trackbar Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff486076(v=VS.85).aspx">Trackbar Control Notifications</a></td></tr><tr><td>TCM and TCN</td><td>Tab control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff486047(v=VS.85).aspx">Tab Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff486048(v=VS.85).aspx">Tab Control Notifications</a></td></tr><tr><td>TDM and TDN</td><td>Task dialog</td><td><a href="http://msdn.microsoft.com/en-us/library/ff486053(v=VS.85).aspx">Task Dialog Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff486054(v=VS.85).aspx">Task Dialog Notifications</a></td></tr><tr><td>TTM and TTN</td><td>Tooltip control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff486069(v=VS.85).aspx">Tooltip Control Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff486070(v=VS.85).aspx">Tooltip Control Notifications</a></td></tr><tr><td>TVM and TVN</td><td>Tree-view control </td><td><a href="http://msdn.microsoft.com/en-us/library/ff486106(v=VS.85).aspx">Tree View Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff486107(v=VS.85).aspx">Tree View Notifications</a></td></tr><tr><td>UDM and UDN</td><td>Up-down control</td><td><a href="http://msdn.microsoft.com/en-us/library/ff486114(v=VS.85).aspx">Up-Down Messages</a> and <a href="http://msdn.microsoft.com/en-us/library/ff486115(v=VS.85).aspx">Up-Down Notifications</a></td></tr><tr><td>WM</td><td>General </td><td><dl><dt><a href="http://msdn.microsoft.com/en-us/library/ff468803(v=VS.85).aspx">Clipboard Messages</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468804(v=VS.85).aspx">Clipboard Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468811(v=VS.85).aspx">Common Dialog Box Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468816(v=VS.85).aspx">Cursor Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ms649011(v=VS.85).aspx">Data Copy Message</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff729170(v=VS.85).aspx">Desktop Window Manager Messages</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/aa363236(v=VS.85).aspx">Device Management Messages</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468827(v=VS.85).aspx">Dialog Box Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468837(v=VS.85).aspx">Dynamic Data Exchange Messages</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468838(v=VS.85).aspx">Dynamic Data Exchange Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468843(v=VS.85).aspx">Hook Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468853(v=VS.85).aspx">Keyboard Accelerator Messages</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468854(v=VS.85).aspx">Keyboard Accelerator Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468860(v=VS.85).aspx">Keyboard Input Messages</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468861(v=VS.85).aspx">Keyboard Input Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468866(v=VS.85).aspx">Menu Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468877(v=VS.85).aspx">Mouse Input Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468892(v=VS.85).aspx">Multiple Document Interface Messages</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468898(v=VS.85).aspx">Raw Input Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff486024(v=VS.85).aspx">Scroll Bar Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468914(v=VS.85).aspx">Timer Notifications</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468921(v=VS.85).aspx">Window Messages</a></dt><dt><a href="http://msdn.microsoft.com/en-us/library/ff468922(v=VS.85).aspx">Window Notifications</a></dt></dl></td></tr></tbody></table><p>&nbsp;</p><p>General window messages cover a wide range of information and requests, including messages for mouse and keyboard input, menu and dialog box input, window creation and management, and Dynamic Data Exchange (DDE). </p><h4><a id="app_defined"></a>Application-Defined Messages</h4><p>An application can create messages to be used by its own windows or to communicate with windows in other processes. If an application creates its own messages, the window procedure that receives them must interpret the messages and provide appropriate processing. </p><p>Message-identifier values are used as follows: </p><ul><li>The system reserves message-identifier values in the range 0x0000 through 0x03FF (the value of <a href="http://msdn.microsoft.com/en-us/library/ms644931(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_USER</strong></a>&nbsp;
					– 1) for system-defined messages. Applications cannot use these values for private messages. </li><li>Values in the range 0x0400 (the value of <a href="http://msdn.microsoft.com/en-us/library/ms644931(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_USER</strong></a>) through 0x7FFF are available for message identifiers for private window classes. </li><li>If your application is marked version 4.0, you can use message-identifier values in the range 0x8000 (<a href="http://msdn.microsoft.com/en-us/library/ms644930(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_APP</strong></a>) through 0xBFFF for private messages. </li><li>The system returns a message identifier in the range 0xC000 through 0xFFFF when an application calls the <a href="http://msdn.microsoft.com/en-us/library/ms644947(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">RegisterWindowMessage</strong></a> function to register a message. The message identifier returned by this function is guaranteed to be unique throughout the system. Use of this function prevents conflicts that can arise if other applications use the same message identifier for different purposes. </li></ul><h3><a id="routing"></a>Message Routing</h3><p>The system uses two methods to route messages to a window procedure: posting messages to a first-in, first-out queue called a 
				<em>message queue</em>, a system-defined memory object that temporarily stores messages, and sending messages directly to a window procedure.</p><p>A messages that is posted to a message queue is called 
				a <em>queued message</em>. These are primarily the result of user input entered through the mouse or keyboard, such as <a href="http://msdn.microsoft.com/en-us/library/ms645616(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_MOUSEMOVE</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms645607(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_LBUTTONDOWN</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms646280(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_KEYDOWN</strong></a>, and <a href="http://msdn.microsoft.com/en-us/library/ms646276(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_CHAR</strong></a> messages. Other queued messages include the timer, paint, and quit messages: <a href="http://msdn.microsoft.com/en-us/library/ms644902(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_TIMER</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/dd145213(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_PAINT</strong></a>, and <a href="http://msdn.microsoft.com/en-us/library/ms632641(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_QUIT</strong></a>. Most other messages, which are sent directly to a window procedure, are called 
				<em>nonqueued messages</em>. </p><p></p><ul><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#quequed_messages">Queued Messages</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#nonqueued_messages">Nonqueued Messages</a></li></ul><h4><a id="quequed_messages"></a>Queued Messages</h4><p>The system can display any number of windows at a time. To route mouse and keyboard input to the appropriate window, the system uses message queues. </p><p>The system maintains a single system message queue and one thread-specific message queue for each GUI thread.  To avoid the overhead of creating a message queue for non–GUI threads, all threads are created initially without a message queue. The system creates a thread-specific message queue only when the thread makes its first call to one of the specific user functions; no GUI function calls result in the creation of a message queue.</p><h4><a id="queued_messages"></a>Queued Messages</h4><p>Whenever the user moves the mouse, clicks the mouse buttons, or types on the keyboard, the device driver for the mouse or keyboard converts the input into messages and places them in the system message queue. The system removes the messages, one at a time, from the system message queue, examines them to determine the destination window, and then posts them to the message queue of the thread that created the destination window. A thread's message queue receives all mouse and keyboard messages for the windows created by the thread. The thread removes messages from its queue and directs the system to send them to the appropriate window procedure for processing. </p><p>With the exception of the <a href="http://msdn.microsoft.com/en-us/library/dd145213(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_PAINT</strong></a> message, the <a href="http://msdn.microsoft.com/en-us/library/ms644902(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_TIMER</strong></a> message, and the <a href="http://msdn.microsoft.com/en-us/library/ms632641(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_QUIT</strong></a> message, the system always posts messages at the end of a message queue. This ensures that a window receives its input messages in the proper first in, first out (FIFO) sequence. The <strong>WM_PAINT</strong> message, the <strong>WM_TIMER</strong> message, and the <strong>WM_QUIT</strong> message, however, are kept in the queue and are forwarded to the window procedure only when the queue contains no other messages. In addition, multiple 
				<strong>WM_PAINT</strong> messages for the same window are combined into a single 
				<strong>WM_PAINT</strong> message, consolidating all invalid parts of the client area into a single area. Combining 
				<strong>WM_PAINT</strong> messages reduces the number of times a window must redraw the contents of its client area. </p><p>The system posts a message to a thread's message queue by filling an <a href="http://msdn.microsoft.com/en-us/library/ms644958(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">MSG</strong></a> structure and then copying it to the message queue. Information in <strong>MSG</strong> includes: the handle of the window for which the message is intended, the message identifier, the two message parameters, the time the message was posted, and the mouse cursor position. A thread can post a message to its own message queue or to the queue of another thread by using the <a href="http://msdn.microsoft.com/en-us/library/ms644944(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PostMessage</strong></a> or <a href="http://msdn.microsoft.com/en-us/library/ms644946(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PostThreadMessage</strong></a> function. </p><p>An application can remove a message from its queue by using the <a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a> function. To examine a message without removing it from its queue, an application can use the <a href="http://msdn.microsoft.com/en-us/library/ms644943(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PeekMessage</strong></a> function. This function fills <a href="http://msdn.microsoft.com/en-us/library/ms644958(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">MSG</strong></a> with information about the message. </p><p>After removing a message from its queue, an application can use the <a href="http://msdn.microsoft.com/en-us/library/ms644934(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">DispatchMessage</strong></a> function to direct the system to send the message to a window procedure for processing. <strong>DispatchMessage</strong> takes a pointer to <a href="http://msdn.microsoft.com/en-us/library/ms644958(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">MSG</strong></a> that was filled by a previous call to the <a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a> or <a href="http://msdn.microsoft.com/en-us/library/ms644943(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PeekMessage</strong></a> function. <strong>DispatchMessage</strong> passes the window handle, the message identifier, and the two message parameters to the window procedure, but it does not pass the time the message was posted or mouse cursor position. An application can retrieve this information by calling the <a href="http://msdn.microsoft.com/en-us/library/ms644939(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessageTime</strong></a> and <a href="http://msdn.microsoft.com/en-us/library/ms644938(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessagePos</strong></a> functions while processing a message. </p><p>A thread can use the <a href="http://msdn.microsoft.com/en-us/library/ms644956(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WaitMessage</strong></a> function to yield control to other threads when it has no messages in its message queue. The function suspends the thread and does not return until a new message is placed in the thread's message queue. </p><p>You can call the <a href="http://msdn.microsoft.com/en-us/library/ms644954(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SetMessageExtraInfo</strong></a> function to associate a value with the current thread's message queue. Then call the <a href="http://msdn.microsoft.com/en-us/library/ms644937(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessageExtraInfo</strong></a> function to get the value associated with the last message retrieved by the <a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a> or <a href="http://msdn.microsoft.com/en-us/library/ms644943(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PeekMessage</strong></a> function. </p><h4><a id="nonqueued_messages"></a>Nonqueued Messages</h4><p>Nonqueued messages are sent immediately to the destination window procedure, bypassing the system message queue and thread message queue. The system typically sends nonqueued messages to notify a window of events that affect it. For example, when the user activates a new application window, the system sends the window a series of messages, including <a href="http://msdn.microsoft.com/en-us/library/ms646274(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_ACTIVATE</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms646283(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_SETFOCUS</strong></a>, and <a href="http://msdn.microsoft.com/en-us/library/ms648382(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_SETCURSOR</strong></a>. These messages notify the window that it has been activated, that keyboard input is being directed to the window, and that the mouse cursor has been moved within the borders of the window. Nonqueued messages can also result when an application calls certain system functions. For example, the system sends the <a href="http://msdn.microsoft.com/en-us/library/ms632652(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_WINDOWPOSCHANGED</strong></a> message after an application uses the <a href="http://msdn.microsoft.com/en-us/library/ms633545(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SetWindowPos</strong></a> function to move a window. </p><p>Some functions that send nonqueued messages are <a href="http://msdn.microsoft.com/en-us/library/ms644932(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">BroadcastSystemMessage</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms644933(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">BroadcastSystemMessageEx</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms644950(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessage</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms644952(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessageTimeout</strong></a>, and <a href="http://msdn.microsoft.com/en-us/library/ms644953(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendNotifyMessage</strong></a>. </p><h3><a id="handling"></a>Message Handling</h3><p>An application must remove and process messages posted to the message queues of its threads. A single-threaded application usually uses a <em>message loop</em> in its <a href="http://msdn.microsoft.com/en-us/library/ms633559(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WinMain</strong></a> function to remove and send messages to the appropriate window procedures for processing. Applications with multiple threads can include a message loop in each thread that creates a window. The following sections describe how a message loop works and explain the role of a window procedure: </p><p></p><ul><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#loop">Message Loop</a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#window_proc">Window Procedure</a></li></ul><h4><a id="loop"></a>Message Loop</h4><p>A simple message loop consists of one function call to each of these three functions: <a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms644955(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">TranslateMessage</strong></a>, and <a href="http://msdn.microsoft.com/en-us/library/ms644934(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">DispatchMessage</strong></a>. Note that if there is an error, <strong>GetMessage</strong> returns -1 -- thus the need for the special testing.</p><div class="LW_CodeSnippetContainer" xmlns=""><a name="CodeSpippet0"></a><div class="LW_CodeSnippetContainerCodeCollection"><div class="LW_CodeSnippetToolBar"><div class="LW_CodeSnippetToolBarText" style="valign: top"><a title="Copy to clipboard." href="javascript:CodeSnippet_CopyCode('CodeSnippetContainerCode0');">Copy</a></div></div><div id="CodeSnippetContainerCode0" class="LW_CodeSnippetContainerCode"><div style="color:Black;"><pre>
MSG msg;
BOOL bRet;

while( (bRet = GetMessage( &amp;msg, NULL, 0, 0 )) != 0)
{ 
    if (bRet == -1)
    {
        // handle the error and possibly exit
    }
    else
    {
        TranslateMessage(&amp;msg); 
        DispatchMessage(&amp;msg); 
    }
}

</pre></div></div></div></div><p>The <a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a> function retrieves a message from the queue and copies it to a structure of type <a href="http://msdn.microsoft.com/en-us/library/ms644958(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">MSG</strong></a>. It returns a nonzero value, unless it encounters the <a href="http://msdn.microsoft.com/en-us/library/ms632641(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_QUIT</strong></a> message, in which case it returns FALSE and ends the loop. In a single-threaded application, ending the message loop is often the first step in closing the application. An application can end its own loop by using the <a href="http://msdn.microsoft.com/en-us/library/ms644945(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PostQuitMessage</strong></a> function, typically in response to the <a href="http://msdn.microsoft.com/en-us/library/ms632620(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_DESTROY</strong></a> message in the window procedure of the application's main window. </p><p>If you specify a window handle as the second parameter of <a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a>, only messages for the specified window are retrieved from the queue. <strong>GetMessage</strong> can also filter messages in the queue, retrieving only those messages that fall within a specified range. For more information about filtering messages, see <a href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#filtering">Message Filtering</a>. </p><p>A thread's message loop must include <a href="http://msdn.microsoft.com/en-us/library/ms644955(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">TranslateMessage</strong></a> if the thread is to receive character input from the keyboard. The system generates virtual-key messages (<a href="http://msdn.microsoft.com/en-us/library/ms646280(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_KEYDOWN</strong></a> and <a href="http://msdn.microsoft.com/en-us/library/ms646281(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_KEYUP</strong></a>) each time the user presses a key. A virtual-key message contains a virtual-key code that identifies which key was pressed, but not its character value. To retrieve this value, the message loop must contain <strong>TranslateMessage</strong>, which translates the virtual-key message into a character message (<a href="http://msdn.microsoft.com/en-us/library/ms646276(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_CHAR</strong></a>) and places it back into the application message queue. The character message can then be removed upon a subsequent iteration of the message loop and dispatched to a window procedure. </p><p>The <a href="http://msdn.microsoft.com/en-us/library/ms644934(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">DispatchMessage</strong></a> function sends a message to the window procedure associated with the window handle specified in the <a href="http://msdn.microsoft.com/en-us/library/ms644958(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">MSG</strong></a> structure. If the window handle is HWND_TOPMOST, <strong>DispatchMessage</strong> sends the message to the window procedures of all top-level windows in the system. If the window handle is NULL, <strong>DispatchMessage</strong> does nothing with the message. </p><p>An application's main thread starts its message loop after initializing the application and creating at least one window. After it is  started, the message loop continues to retrieve messages from the thread's message queue and to dispatch them to the appropriate windows. The message loop ends when the <a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a> function removes the <a href="http://msdn.microsoft.com/en-us/library/ms632641(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_QUIT</strong></a> message from the message queue. </p><p>Only one message loop is needed for a message queue, even if an application contains many windows. <a href="http://msdn.microsoft.com/en-us/library/ms644934(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">DispatchMessage</strong></a> always dispatches the message to the proper window; this is because each message in the queue is an <a href="http://msdn.microsoft.com/en-us/library/ms644958(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">MSG</strong></a> structure that contains the handle of the window to which the message belongs. </p><p>You can modify a message loop in a variety of ways. For example, you can retrieve messages from the queue without dispatching them to a window. This is useful for applications that post messages not specifying a window. You can also direct <a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a> to search for specific messages, leaving other messages in the queue. This is useful if you must temporarily bypass the usual FIFO order of the message queue. </p><p>An application that uses accelerator keys must be able to translate keyboard messages into command messages. To do this, the application's message loop must include a call to the <a href="http://msdn.microsoft.com/en-us/library/ms646373(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">TranslateAccelerator</strong></a> function. For more information about accelerator keys, see <a href="http://msdn.microsoft.com/en-us/library/ms645526(v=VS.85).aspx">Keyboard Accelerators</a>. </p><p>If a thread uses a modeless dialog box, the message loop must include the <a href="http://msdn.microsoft.com/en-us/library/ms645498(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">IsDialogMessage</strong></a> function so that the dialog box can receive keyboard input. </p><h4><a id="window_proc"></a>Window Procedure</h4><p>A window procedure is a function that receives and processes all messages sent to the window. Every window class has a window procedure, and every window created with that class uses that same window procedure to respond to messages. </p><p>The system sends a message to a window procedure by passing the message data as arguments to the procedure. The window procedure then performs an appropriate action for the message; it checks the message identifier and, while processing the message, uses the information specified by the message parameters. </p><p>A window procedure does not usually ignore a message. If it does not process a message, it must send the message back to the system for default processing. The window procedure does this by calling the <a href="http://msdn.microsoft.com/en-us/library/ms633572(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">DefWindowProc</strong></a> function, which performs a default action and returns a message result. The window procedure must then return this value as its own message result. Most window procedures process just a few messages and pass the others on to the system by calling <strong>DefWindowProc</strong>. </p><p>Because a window procedure is shared by all windows belonging to the same class, it can process messages for several different windows. To identify the specific window affected by the message, a window procedure can examine the window handle passed with a message. For more information about window procedures, see <a href="http://msdn.microsoft.com/en-us/library/ms632593(v=VS.85).aspx">Window Procedures</a>. </p><h3><a id="filtering"></a>Message Filtering</h3><p>An application can choose specific messages to retrieve from the message queue (while ignoring other messages) by using the <a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a> or <a href="http://msdn.microsoft.com/en-us/library/ms644943(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PeekMessage</strong></a> function to specify a message filter. The filter is a range of message identifiers (specified by a first and last identifier), a window handle, or both. <strong>GetMessage</strong> and <strong>PeekMessage</strong> use a message filter to select which messages to retrieve from the queue. Message filtering is useful if an application must search the message queue for messages that have arrived later in the queue. It is also useful if an application must process input (hardware) messages before processing posted messages. </p><p>The WM_KEYFIRST and WM_KEYLAST constants can be used as filter values to retrieve all keyboard messages; the WM_MOUSEFIRST and WM_MOUSELAST constants can be used to retrieve all mouse messages. </p><p>Any application that filters messages must ensure that a message satisfying the message filter can be posted. For example, if an application filters for a <a href="http://msdn.microsoft.com/en-us/library/ms646276(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_CHAR</strong></a> message in a window that does not receive keyboard input, the <a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a> function does not return. This effectively "hangs" the application. </p><h3><a id="posting_sending"></a>Posting and Sending Messages</h3><p>Any application can post and send messages. Like the system, an application posts a message by copying it to a message queue and sends a message by passing the message data as arguments to a window procedure. To post messages, an application uses the <a href="http://msdn.microsoft.com/en-us/library/ms644944(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PostMessage</strong></a> function. An application can send a message by calling the <a href="http://msdn.microsoft.com/en-us/library/ms644950(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessage</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms644932(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">BroadcastSystemMessage</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms644951(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessageCallback</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms644952(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessageTimeout</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms644953(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendNotifyMessage</strong></a>, or <a href="http://msdn.microsoft.com/en-us/library/ms645515(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendDlgItemMessage</strong></a> function. </p><h4><a id="posting_messages"></a>Posting Messages</h4><p>An application typically posts a message to notify a specific window to perform a task. <a href="http://msdn.microsoft.com/en-us/library/ms644944(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PostMessage</strong></a> creates an <a href="http://msdn.microsoft.com/en-us/library/ms644958(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">MSG</strong></a> structure for the message and copies the message to the message queue. The application's message loop eventually retrieves the message and dispatches it to the appropriate window procedure. </p><p>An application can post a message without specifying a window. If the application supplies a NULL window handle when calling <a href="http://msdn.microsoft.com/en-us/library/ms644944(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PostMessage</strong></a>, the message is posted to the queue associated with the current thread. Because no window handle is specified, the application must process the message in the message loop. This is one way to create a message that applies to the entire application, instead of to a specific window. </p><p>Occasionally, you may want to post a message to all top-level windows in the system. An application can post a message to all top-level windows by calling <a href="http://msdn.microsoft.com/en-us/library/ms644944(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PostMessage</strong></a> and specifying HWND_TOPMOST in the 
				<em>hwnd</em> parameter. </p><p>A common programming error is to assume that the <a href="http://msdn.microsoft.com/en-us/library/ms644944(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PostMessage</strong></a> function always posts a message. This is not true when the message queue is full. An application should check the return value of the <strong>PostMessage</strong> function to determine whether the message has been posted and, if it has not been, repost it. </p><h4><a id="sending_messages"></a>Sending Messages</h4><p>An application typically sends a message to notify a window procedure to perform a task immediately. The <a href="http://msdn.microsoft.com/en-us/library/ms644950(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessage</strong></a> function sends the message to the window procedure corresponding to the given window. The function waits until the window procedure completes processing and then returns the message result. Parent and child windows often communicate by sending messages to each other. For example, a parent window that has an edit control as its child window can set the text of the control by sending a message to it. The control can notify the parent window of changes to the text that are carried out by the user by sending messages back to the parent. </p><p>The <a href="http://msdn.microsoft.com/en-us/library/ms644951(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessageCallback</strong></a> function also sends a message to the window procedure corresponding to the given window. However, this function returns immediately. After the window procedure processes the message, the system calls the specified callback function. For more information about the callback function, see the <a href="http://msdn.microsoft.com/en-us/library/ms644949(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendAsyncProc</strong></a> function. </p><p>Occasionally, you may want to send a message to all top-level windows in the system. For example, if the application changes the system time, it must notify all top-level windows about the change by sending a <a href="http://msdn.microsoft.com/en-us/library/ms725498(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">WM_TIMECHANGE</strong></a> message. An application can send a message to all top-level windows by calling <a href="http://msdn.microsoft.com/en-us/library/ms644950(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessage</strong></a> and specifying HWND_TOPMOST in the 
				<em>hwnd</em> parameter. You can also broadcast a message to all applications by calling the <a href="http://msdn.microsoft.com/en-us/library/ms644932(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">BroadcastSystemMessage</strong></a> function and specifying BSM_APPLICATIONS in the 
				<em>lpdwRecipients</em> parameter. </p><p>By using the <a href="http://msdn.microsoft.com/en-us/library/ms644941(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">InSendMessage</strong></a> or <a href="http://msdn.microsoft.com/en-us/library/ms644942(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">InSendMessageEx</strong></a> function, a window procedure can determine whether it is processing a message sent by another thread. This capability is useful when message processing depends on the origin of the message. </p><h3><a id="deadlocks"></a>Message Deadlocks</h3><p>A thread that calls the <a href="http://msdn.microsoft.com/en-us/library/ms644950(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessage</strong></a> function to send a message to another thread cannot continue executing until the window procedure that receives the message returns. If the receiving thread yields control while processing the message, the sending thread cannot continue executing, because it is waiting for <strong>SendMessage</strong> to return. If the receiving thread is attached to the same queue as the sender, it can cause an application deadlock to occur. (Note that journal hooks attach threads to the same queue.)</p><p>Note that the receiving thread need not yield control explicitly; calling any of the following functions can cause a thread to yield control implicitly. </p><ul><li><a href="http://msdn.microsoft.com/en-us/library/ms645452(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">DialogBox</strong></a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms645457(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">DialogBoxIndirect</strong></a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms645461(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">DialogBoxIndirectParam</strong></a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms645465(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">DialogBoxParam</strong></a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644936(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">GetMessage</strong></a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms645505(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">MessageBox</strong></a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644943(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">PeekMessage</strong></a></li><li><a href="http://msdn.microsoft.com/en-us/library/ms644950(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessage</strong></a></li></ul><p>To avoid potential deadlocks in your application, consider using the <a href="http://msdn.microsoft.com/en-us/library/ms644953(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendNotifyMessage</strong></a> or <a href="http://msdn.microsoft.com/en-us/library/ms644952(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessageTimeout</strong></a> functions. Otherwise, a window procedure can determine whether a message it has received was sent by another thread by calling the <a href="http://msdn.microsoft.com/en-us/library/ms644941(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">InSendMessage</strong></a> or <a href="http://msdn.microsoft.com/en-us/library/ms644942(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">InSendMessageEx</strong></a> function. Before calling any of the functions in the preceding list while processing a message, the window procedure should first call <strong>InSendMessage</strong> or <strong>InSendMessageEx</strong>. If this function returns TRUE, the window procedure must call the <a href="http://msdn.microsoft.com/en-us/library/ms644948(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">ReplyMessage</strong></a> function before any function that causes the thread to yield control. </p><h3><a id="broadcasting"></a>Broadcasting Messages</h3><p>Each message consists of a message identifier and two parameters,
				<em>wParam</em> and 
				<em>lParam</em>. The message identifier is a unique value that specifies the message purpose. The parameters provide additional information that is message-specific, but the 
				<em>wParam</em> parameter is generally a type value that provides more information about the message.</p><p>A 
				<em>message broadcast</em> is simply the sending of a message to multiple recipients in the system. To broadcast a message from an application, use the <a href="http://msdn.microsoft.com/en-us/library/ms644932(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">BroadcastSystemMessage</strong></a> function, specifying the recipients of the message. Rather than specify individual recipients, you must specify one or more types of recipients. These types are applications, installable drivers, network drivers, and system-level device drivers. The system sends broadcast messages to all members of each specified type. </p><p>The system typically broadcasts messages in response to changes that take place within system-level device drivers or related components. The driver or related component broadcasts the message to applications and other components to notify them of the change. For example, the component responsible for disk drives broadcasts a message whenever the device driver for the floppy disk drive detects a change of media such as when the user inserts a disk in the drive.</p><p>The system broadcasts messages to recipients in this order: system-level device drivers, network drivers, installable drivers, and applications. This means that system-level device drivers, if chosen as recipients, always get the first opportunity to respond to a message. Within a given recipient type, no driver is guaranteed to receive a given message before any other driver. This means that a message intended for a specific driver must have a globally-unique message identifier so that no other driver unintentionally processes it.</p><p>You can also broadcast messages to all top-level windows by specifying HWND_BROADCAST in the <a href="http://msdn.microsoft.com/en-us/library/ms644950(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessage</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms644951(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessageCallback</strong></a>, <a href="http://msdn.microsoft.com/en-us/library/ms644952(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendMessageTimeout</strong></a>, or <a href="http://msdn.microsoft.com/en-us/library/ms644953(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">SendNotifyMessage</strong></a> function. </p><p>Applications receive messages through the window procedure of their top-level windows. Messages are not sent to child windows. Services can receive messages through a window procedure or their service control handlers.</p><p class="note"><strong>Note</strong>&nbsp;&nbsp;System-level device drivers use a related, system-level function to broadcast system messages. </p><h3><a id="query"></a>Query Messages</h3><p>You can create your own custom messages and use them to coordinate activities between your applications and other components in the system. This is especially useful if you have created your own installable drivers or system-level device drivers. Your custom messages can carry information to and from your driver and the applications that use the driver. </p><p>To poll recipients for permission to carry out a given action, use a 
				<em>query message</em>. You can generate your own query messages by setting the BSF_QUERY value in the 
				<em>dwFlags</em> parameter when calling <a href="http://msdn.microsoft.com/en-us/library/ms644932(v=VS.85).aspx"><strong xmlns="http://www.w3.org/1999/xhtml">BroadcastSystemMessage</strong></a>. Each recipient of the query message must return TRUE for the function to send the message to the next recipient. If any recipient returns BROADCAST_QUERY_DENY, the broadcast ends immediately and the function returns a zero.</p><p>&nbsp;</p><p>&nbsp;</p><p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20[winmsg\winmsg]:%20About%20Messages%20and%20Message%20Queues%20%20RELEASE:%20(10/26/2010)&body=%0A%0APRIVACY%20STATEMENT%0A%0AThe%20SDK%20team%20uses%20the%20feedback%20submitted%20to%20improve%20the%20SDK%20documentation.%20We%20do%20not%20use%20your%20email%20address%20for%20any%20other%20purpose.%20We%20will%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20you%20are%20reporting%20has%20been%20resolved.%20While%20we%20are%20working%20to%20resolve%20this%20issue,%20we%20may%20send%20you%20an%20email%20message%20to%20request%20more%20information%20about%20your%20feedback.%20After%20the%20issues%20have%20been%20addressed,%20we%20may%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20your%20feedback%20has%20been%20addressed.%0A%0AFor%20more%20information%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/en-us/default.aspx." title="Send comments about this topic to Microsoft">Send comments about this topic to Microsoft</a></p><p>Build date: 10/26/2010</p></div></div></div></div></div><div class="footer"><div id="footer" class="footerContainer cl_footer_slice"><div class="footerLogoContainer"><div class="footerContent"><div class="copyright">
      © 2010 Microsoft Corporation. All rights reserved.</div><div class="footerLogo cl_footer_logo"></div><a href="http://msdn.microsoft.com/cc300389.aspx">Terms of Use</a><span class="pipe"> | </span><a href="http://www.microsoft.com/library/toolbar/3.0/trademarks/en-us.mspx">Trademarks</a><span class="pipe"> | </span><a href="http://www.microsoft.com/info/privacy.mspx">Privacy Statement</a><span class="pipe">| </span><a onclick="javascript:ShowFeedbackDialog();" title="Feedback" class="FeedbackLink" href="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx#footerLink">
      Feedback
        <span class="FeedbackButton clip20x21" id="FeedbackButton"><img class="cl_footer_feedback_icon" src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" alt="Feedback"></span></a><div id="FeedbackContainer" class="FeedbackContainer"><form method="post" action="http://msdn.microsoft.com/en-us/library/feedback/add/ms644927(v=VS.85).aspx"><div class="FeedbackTitleContainer"><div class="FeedbackTitle">
            Feedback</div><div class="FeedbackCancel"><a href="javascript:;" onclick="document.getElementById(&#39;FeedbackContainer&#39;).style.display = &#39;none&#39;;">x</a></div></div><div class="FeedbackData"><div class="FeedbackInfoText">
            Tell us about your experience...
        </div><div class="QuestionText">
            Did the page load quickly?
        </div><div class="AnswerText"><span>
                Yes<span><input id="searchBox" name="searchBox" type="radio" value="1"></span></span><span>
                No<span><input id="searchBox" name="searchBox" type="radio" value="0"></span></span></div><div class="QuestionText">
            Do you like the page design?
        </div><div class="AnswerText"><span>
                Yes<span><input id="tabbedCode" name="tabbedCode" type="radio" value="1"></span></span><span>
                No<span><input id="tabbedCode" name="tabbedCode" type="radio" value="0"></span></span></div><div class="QuestionText">
            How useful is this topic?
        </div><div class="FeedbackGraphicHolder clip269x23"><img alt="" src="./About Messages and Message Queues (Windows)_files/8841a3a4fc3a5f17f74da3b076fe248a.png" class="cl_online_scale FeedbackSiderGraphic"></div><div class="RadioButtonHolder"><div class="RateRadioOne"><input id="topicUseful" name="topicUseful" title="Really disliked it" type="radio" value="1"></div><div class="RateRadio"><input id="topicUseful" name="topicUseful" title="Disliked it" type="radio" value="2"></div><div class="RateRadio"><input id="topicUseful" name="topicUseful" title="OK" type="radio" value="3"></div><div class="RateRadio"><input id="topicUseful" name="topicUseful" title="Good" type="radio" value="4"></div><div class="RateRadioLast"><input id="topicUseful" name="topicUseful" title="Really Good" type="radio" value="5"></div></div><div class="QuestionText">
            Tell us more
        </div><div class="FeedbackTextAreaContainer"><textarea name="feedbackText" cols="25" rows="5" class="FeedbackTextArea" onfocus="document.onkeydown = &#39;&#39;;" onblur="document.onkeydown = Presskey;" onkeyup="LimitText(this, 4000);" onkeydown="LimitText(this, 4000);"></textarea><textarea id="feedbackDescription" name="feedbackDescription" cols="25" rows="10" style="display:none;" onkeyup="LimitText(this, 4000);" onkeydown="LimitText(this, 4000);">Enter description here.</textarea><input type="hidden" id="feedbackPriority" name="feedbackPriority" value=""><input type="hidden" id="feedbackSourceUrl" name="feedbackSourceUrl" value=""><input type="hidden" id="ClientIP" name="ClientIP" value=""><input type="hidden" id="ClientOS" name="ClientOS" value=""><input type="hidden" id="ClientBrowser" name="ClientBrowser" value=""><input type="hidden" id="ClientTime" name="ClientTime" value=""><input type="hidden" id="ClientTimeZone" name="ClientTimeZone" value=""></div><div><input type="submit" value="Send" class="FeedbackSubmit" onclick="document.getElementById(&#39;feedbackDescription&#39;).value=&#39;&#39;;document.getElementById(&#39;feedBackVersion&#39;).value = &#39;-1&#39;;"></div></div><input type="hidden" id="returnUrl" name="returnUrl" value="http://msdn.microsoft.com/en-us/library/ms644927(v=VS.85).aspx"><input type="hidden" id="feedBackVersion" name="feedBackVersion" value="1"></form></div></div></div></div></div><div class="MetricsContainer"><div class="WebtrendsContainer"><script type="text/javascript" language="javascript">
//<![CDATA[
  var literalNormalizedUrl = '/en-us/library/ms644927(d=lightweight,l=en-us,v=VS.85).aspx';
  var wt_nvr_ru = 'WT_NVR_RU';
  var wt_fpcdom = '.microsoft.com';
  var wt_domlist = 'msdn.microsoft.com';
  var wt_pathlist = '';
  var wt_paramlist = 'DCSext.mtps_devcenter';
  var wt_siteid = 'MSDN';
  var gDomain = 'm.webtrends.com';
  var gDcsId = 'dcsmgru7m99k7mqmgrhudo0k8_8c6m';
  var gFpc = 'WT_FPC';
  if (document.cookie.indexOf(gFpc + "=") == -1) {
    document.write("<scr" + "ipt type='text/javascript' src='" + "http" + (window.location.protocol.indexOf('https:') == 0 ? 's' : '') + "://" + gDomain + "/" + gDcsId + "/wtid.js" + "'><\\/scr" + "ipt>");
  }
  var detectedLocale = 'en-us';
  var wtsp = 'msdnlib_w32_com';
  var gTrackEvents = '0';
/*]]>*/
</script><noscript>&lt;div&gt;&lt;img alt="DCSIMG" id="Img1" width="1" height="1" src="http://m.webtrends.com/dcsmgru7m99k7mqmgrhudo0k8_8c6m/njs.gif?dcsuri=/nojavascript&amp;amp;WT.js=No" /&gt;&lt;/div&gt;</noscript></div><div class="OmnitureContainer"><script type="text/javascript">
  var omni_guid = '1f0026da-a620-4a35-91cf-1c99c961010b'; 
</script><noscript>&lt;a href="http://www.omniture.com" title="Web Analytics"&gt;&lt;img src="//msstonojsmsdn.112.2o7.net/b/ss/msstonojsmsdn/1/H.20.2--NS/0" height="1" width="1" border="0" alt="" /&gt;&lt;/a&gt;</noscript></div><div class="WebMetrixContainer"><div class="MetricsContainer"><img alt="Page view tracker" src="./About Messages and Message Queues (Windows)_files/trans_pixel.asp" width="0" height="0" border="0"></div></div></div><script language="javascript" type="text/javascript" src="./About Messages and Message Queues (Windows)_files/broker.js"></script><script type="text/javascript" src="./About Messages and Message Queues (Windows)_files/3f9eeceb05dc38c29132243d6466cee6.js" xmlns="http://www.w3.org/1999/xhtml"></script><script src="./About Messages and Message Queues (Windows)_files/broker-config.js"></script></body></html>